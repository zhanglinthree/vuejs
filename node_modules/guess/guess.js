/*!
 * @name JavaScript/NodeJS Guess v1.0.2
 * @author yeikos
 * @repository https://github.com/yeikos/js.guess
  
 * Copyright 2013 yeikos - MIT license
 * https://raw.github.com/yeikos/js.guess/master/LICENSE
 */

 ;(function(isNode) {

	var Public = function(min, max, query, success) {

		if (isNaN(min) || isNaN(max) ||
			(min%1) || (max%1) || min > max ||
			typeof query !== 'function' ||
			typeof success !== 'function')

				throw new Error(publicName + ': arguments not valid');

		if ((min = Number(min)) === ((max = Number(max)))) {

			success(min);

			return;

		}

		var middle = parseInt((max+min)/2, 10);

		query(middle, function(isUpper) {

			if (isUpper) {

				Public(middle+1, max, query, success);

			} else {

				Public(min, middle, query, success);

			}

		});

	}, publicName = 'guess';

	if (isNode)

		return (module.exports = Public);

	window[publicName] = Public;

})((typeof module === 'object' && module && typeof module.exports === 'object' && module.exports));